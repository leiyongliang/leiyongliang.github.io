<!DOCTYPE html>
<html>
<head>
	<title>雨天</title>
	<meta charset='utf-8'>
	<meta name="keywords" content="雨天"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<script src="https://cdn.bootcss.com/rainyday.js/0.1.2/rainyday.min.js"></script>
	<style media="screen">
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        .container {
        	position: absolute;
        	top: 0;
        	left: 0;
        	bottom: 0;
            width: 100%;
        }
        img{
        	height: 100%;
        	width: 100%;
        }
    </style>
</head>
<body>
<div class="container">
	<img id="background" alt="background" src="" />
</div>
<!-- <input type="file" name="file" id="file" onchange="upload()"> -->
</body>
<script type="text/javascript">
	var image = document.getElementById('background');
	var x, y, engine
    image.onload = function() {
        engine = new RainyDay({
            image: this,
            // gravityAngle: Math.PI,
            // crop: [ 50, 50, 600, 400]
        });
        engine.rain([ [1, 1, 3] ], 50);
        setTimeout(() => {
        	engine.rain([[1, 1, 3], [3, 1, 3] ],50);
        },20000)
        setTimeout(() => {
        	engine.rain([ [3, 1, 0.88], [5, 3, 0.9], [6, 2, 1] ], 50);
        	// engine.gravityAngle = Math.PI / 9
        },40000)
        // setTimeout(() => {
        // 	engine.rain([ [3, 3, 0.1] ], 33);
        // },95000)

        // engine.rain([ [3, 2, 2] ], 100);
        // engine.rain([ [3, 3, 0.1] ], 33);
    };
    
    image.crossOrigin = 'anonymous';
    image.src = 'http://i.imgur.com/N7ETzFO.jpg';
    document.addEventListener('touchstart', touch)
    document.addEventListener('touchmove', touchmove)
	function touch (e) {
		x = e.touches[0].clientX
		y = e.touches[0].clientY
		// document.getElementById('background').src='http://i.imgur.com/N7ETzFO.jpg'
		
	}
	function touchmove (e) {
		if (e.touches[0].clientX - x > 100) {
			engine.rain([ [3, 3, 0.1] ], 33);
			document.getElementById('background').src='http://i.imgur.com/HRtuQo8.jpg'
			return
		}
		else if (e.touches[0].clientX - x < -100) {
			engine.rain([ [0, 2, 200], [3, 3, 1] ], 100);
			document.getElementById('background').src='http://i.imgur.com/U1Tqqdw.jpg'
			return
		}
		// else if (e.touches[0].clientY - y > 100) {
		// 	engine.rain([[1, 1, 3], [3, 1, 3] ],100);
		// 	return
		// }
		// else if (e.touches[0].clientY - y > 200) {
		// 	engine.rain([ [3, 1, 0.88], [5, 3, 0.9], [6, 2, 1] ], 100);
		// 	return
		// }
		// else if (e.touches[0].clientY - y < -200) {
		// 	engine.rain([ [1, 1, 3] ], 100);
		// 	return
		// }else if (e.touches[0].clientY - y < -100) {
		// 	engine.rain([[1, 1, 3], [3, 1, 3] ],100);
		// 	return
		// }
	}
</script>
</html>